# XArr Listen - 专业的 Android 通知监听转发工具

XArr Listen 是一款原生开发的高效 Android 通知监听工具，专注于实时捕获并转发设备通知消息，为多设备通知管理提供完整解决方案。

本工具由包子为 XArrPay 开发，目前已完美适配 LeavePay、YPay 等多个第三方支付系统，具有优秀的系统兼容性和扩展性。

## ✨ 核心功能

### 📱 智能通知监听
- 全局通知捕获：支持监听设备上所有应用的通知消息
- 灵活应用筛选：精确选择需要监听的目标应用
- 实时状态反馈：直观显示监听状态和转发统计

### 🚀 高效消息转发
- 实时转发能力：毫秒级转发通知到指定服务器
- 安全传输保障：支持加密传输，确保消息安全
- 便捷配置导入：支持二维码扫描快速配置
- 系统兼容性：完美支持 XArrPay、LeavePay、YPay 等多个支付系统

### 📊 专业通知管理
- 完整历史记录：详细记录每条通知的处理状态
- 智能数据清理：自动清理7天前的历史数据，优化存储空间
- 状态追踪：实时掌握每条通知的转发状态

### ⚡ 系统优势
- 稳定性保障：常驻通知栏，确保服务持续稳定运行
- 资源友好：极低的系统资源占用
- 后台持久：智能后台管理，保证消息不遗漏

## 🔧 快速上手

### 1️⃣ 基础配置
1. 启动应用，进入设置界面
2. 完成服务器配置：
   - 服务器地址 (URL)
   - 商户识别码 (Merchant ID)
   - 安全密钥 (Secret Key)
3. 支持扫码配置：一键导入所有配置信息

### 2️⃣ 应用管理
- 在应用列表中勾选需要监听的应用
- 支持搜索快速定位目标应用
- 配置会自动保存，无需重复设置

### 3️⃣ 权限配置
首次使用请授予以下必要权限：
- 通知访问权限（用于监听通知）
- 后台运行权限（确保服务稳定性）
- 自启动权限（可选，建议开启）

## 🔍 常见问题

### 通知权限问题
Q: 为什么无法获取通知？
A: 请确保已在系统设置中授予应用通知访问权限，并检查目标应用是否在监听列表中。

Q: 后台运行不稳定？
A: 请确保：
1. 已授予自启动权限
2. 未被系统电池优化限制
3. 应用处于通知栏常驻状态

### 配置相关
Q: 配置二维码无法识别？
A: 请确保二维码格式正确，包含完整的配置信息（URL、Merchant ID、Secret Key）。

## 🤝 参与贡献

我们欢迎所有形式的贡献，包括但不限于：

- 提交问题和建议
- 改进文档
- 提交代码修复
- 添加新功能


## ⚠️ 免责声明

1. 本软件是一个付费开源的学习项目，仅供学习和研究使用。
2. 使用本软件时，您必须遵守所在地区的相关法律法规。
3. 严禁将本软件用于任何非法用途，包括但不限于：
   - 未经授权的信息监听
   - 违反隐私保护法规的行为
   - 其他任何违反法律法规的行为
4. 使用者需自行承担因违规使用本软件而产生的一切法律责任和后果。
5. 开发者不对使用者的任何违规行为负责，也不承担任何连带责任。
# 通知上报接口文档

## 接口概述
该接口用于上报设备接收到的通知信息到服务器。支持普通模式和个人版模式两种上报方式。

## 接口地址

### 普通模式
```
POST {platform_url}/api/report/{merchant_id}?token={secret_key}
```

### 个人版模式
```
POST {platform_url}/api/report/app?pid={merchant_id}&token={secret_key}
```

## 请求头
```
Content-Type: application/json
X-Merchant-ID: {merchant_id}
X-Secret-Key: {secret_key}
```

## 请求参数

### URL参数
| 参数名      | 类型   | 必填 | 说明   |
| ----------- | ------ | ---- | ------ |
| merchant_id | string | 是   | 商户ID |
| secret_key  | string | 是   | 密钥   |

### 请求体
```json
{
    "from": "android",
    "content": "{
        'title': '通知标题',
        'msg': '通知内容',
        'package_name': '应用包名',
        'receive_time': '接收时间',
        'device_name': '设备名称'
    }",
    "timestamp": 1234567890123,
    "sign": ""
}
```

| 字段名    | 类型   | 必填 | 说明                         |
| --------- | ------ | ---- | ---------------------------- |
| from      | string | 是   | 来源平台，固定值为"android"  |
| content   | string | 是   | JSON字符串，包含通知详细信息 |
| timestamp | number | 是   | 时间戳，毫秒级               |
| sign      | string | 否   | 签名，当前版本可为空         |

### content字段说明
| 字段名       | 类型   | 必填 | 说明                                     |
| ------------ | ------ | ---- | ---------------------------------------- |
| title        | string | 是   | 通知标题                                 |
| msg          | string | 是   | 通知内容                                 |
| package_name | string | 是   | 发送通知的应用包名                       |
| receive_time | string | 是   | 通知接收时间                             |
| device_name  | string | 是   | 设备名称，未配置时默认为"Unknown Device" |

## 响应格式
```json
{
    "statusCode": 200,
    "body": "服务器响应内容",
    "request_url": "完整请求URL",
    "request_body": "请求体内容"
}
```

| 字段名       | 类型   | 说明             |
| ------------ | ------ | ---------------- |
| statusCode   | number | HTTP状态码       |
| body         | string | 服务器响应内容   |
| request_url  | string | 完整的请求URL    |
| request_body | string | 发送的请求体内容 |

## 注意事项
1. 接口支持普通模式和个人版模式，URL格式略有不同
2. 请求体中的content字段需要进行JSON序列化
3. 设备名称从本地配置获取，未配置时默认为"Unknown Device"
4. 时间戳使用毫秒级时间戳
5. 当前版本sign字段可为空
